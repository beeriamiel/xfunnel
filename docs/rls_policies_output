| schema_name | table_name              | policy_name                                            | permissive | roles                       | command | using_expression                                                                                                                                                                                                                                                     | with_check_expression                                                                                                                                                                                                                                                |
| ----------- | ----------------------- | ------------------------------------------------------ | ---------- | --------------------------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public      | account_users           | account_users_admin_policy                             | true       |                             | *       | ((role = 'admin'::text) AND (auth.uid() = user_id))                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                      |
| public      | account_users           | account_users_base_policy                              | true       |                             | *       | ((auth.uid() = user_id) OR ((auth.jwt() ->> 'is_super_admin'::text) = 'true'::text))                                                                                                                                                                                 |                                                                                                                                                                                                                                                                      |
| public      | account_users           | account_users_creation_policy                          | true       | authenticated               | a       |                                                                                                                                                                                                                                                                      | ((auth.uid() = user_id) OR (EXISTS ( SELECT 1
   FROM account_users au
  WHERE ((au.user_id = auth.uid()) AND (au.role = 'admin'::text)))))                                                                                                                          |
| public      | accounts                | Allow authenticated users to create accounts           | true       | authenticated               | a       |                                                                                                                                                                                                                                                                      | true                                                                                                                                                                                                                                                                 |
| public      | accounts                | Allow initial account creation                         | true       | authenticated,authenticator | a       |                                                                                                                                                                                                                                                                      | (NOT (EXISTS ( SELECT 1
   FROM account_users
  WHERE (account_users.user_id = auth.uid()))))                                                                                                                                                                        |
| public      | accounts                | Enable insert for authenticated users                  | true       | authenticated               | a       |                                                                                                                                                                                                                                                                      | true                                                                                                                                                                                                                                                                 |
| public      | accounts                | Enable select for users with account access            | true       | authenticated               | r       | (id IN ( SELECT account_users.account_id
   FROM account_users
  WHERE (account_users.user_id = auth.uid())))                                                                                                                                                        |                                                                                                                                                                                                                                                                      |
| public      | accounts                | Users can view their accounts                          | true       |                             | r       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = accounts.id) AND (account_users.user_id = auth.uid()))))                                                                                                                               |                                                                                                                                                                                                                                                                      |
| public      | accounts                | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | batch_metadata          | Users can access their account's batches               | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = batch_metadata.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                 |                                                                                                                                                                                                                                                                      |
| public      | batch_metadata          | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | citations               | Users can create citations in their accounts           | true       |                             | a       |                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = citations.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                      |
| public      | citations               | Users can view their account's citations               | true       |                             | r       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = citations.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                      |                                                                                                                                                                                                                                                                      |
| public      | citations               | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | companies               | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | companies               | users_companies_policy                                 | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                      | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                      |
| public      | competitors             | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | competitors             | users_competitors_policy                               | true       |                             | *       | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = competitors.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid())))))))         | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = competitors.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid())))))))         |
| public      | generation_progress     | Users can access their account generation progress     | true       | authenticated               | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = generation_progress.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                            |                                                                                                                                                                                                                                                                      |
| public      | generation_progress     | Users can insert generation progress for their account | true       |                             | a       |                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = generation_progress.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid()))))))) |
| public      | generation_progress     | Users can update their account's generation progress   | true       |                             | w       | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = generation_progress.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid()))))))) |                                                                                                                                                                                                                                                                      |
| public      | generation_progress     | Users can view their account's generation progress     | true       |                             | r       | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = generation_progress.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid()))))))) |                                                                                                                                                                                                                                                                      |
| public      | generation_progress     | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | ideal_customer_profiles | Users can create ICPs in their accounts                | true       |                             | a       |                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = ideal_customer_profiles.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                        |
| public      | ideal_customer_profiles | Users can view their account's ICPs                    | true       |                             | r       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = ideal_customer_profiles.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                        |                                                                                                                                                                                                                                                                      |
| public      | ideal_customer_profiles | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | ideal_customer_profiles | users_icp_policy                                       | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = ideal_customer_profiles.account_id) AND (account_users.user_id = auth.uid()) AND (account_users.role = ANY (ARRAY['admin'::text, 'user'::text])))))                                    |                                                                                                                                                                                                                                                                      |
| public      | ideal_customer_profiles | users_ideal_customer_profiles_policy                   | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = ideal_customer_profiles.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                        | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = ideal_customer_profiles.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                        |
| public      | personas                | Users can create personas in their accounts            | true       |                             | a       |                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = personas.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                       |
| public      | personas                | Users can view their account's personas                | true       |                             | r       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = personas.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                       |                                                                                                                                                                                                                                                                      |
| public      | personas                | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | personas                | users_personas_policy                                  | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = personas.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = personas.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                       |
| public      | prompt_logs             | Users can insert prompt logs for their account         | true       |                             | a       |                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = prompt_logs.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid())))))))         |
| public      | prompt_logs             | Users can view their account's prompt logs             | true       |                             | r       | (EXISTS ( SELECT 1
   FROM companies
  WHERE ((companies.id = prompt_logs.company_id) AND (EXISTS ( SELECT 1
           FROM account_users
          WHERE ((account_users.account_id = companies.account_id) AND (account_users.user_id = auth.uid())))))))         |                                                                                                                                                                                                                                                                      |
| public      | prompt_logs             | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | prompts                 | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | prompts                 | users_prompts_policy                                   | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE (account_users.user_id = auth.uid())))                                                                                                                                                                              | (EXISTS ( SELECT 1
   FROM account_users
  WHERE (account_users.user_id = auth.uid())))                                                                                                                                                                              |
| public      | queries                 | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | queries                 | users_queries_policy                                   | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = queries.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                        | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = queries.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                        |
| public      | response_analysis       | Users can create analyses in their accounts            | true       |                             | a       |                                                                                                                                                                                                                                                                      | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = response_analysis.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                              |
| public      | response_analysis       | Users can view their account's analyses                | true       |                             | r       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = response_analysis.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                              |                                                                                                                                                                                                                                                                      |
| public      | response_analysis       | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | response_analysis       | users_response_analysis_policy                         | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = response_analysis.account_id) AND (account_users.user_id = auth.uid()) AND (account_users.role = ANY (ARRAY['admin'::text, 'user'::text])))))                                          |                                                                                                                                                                                                                                                                      |
| public      | responses               | super_admin_policy                                     | true       |                             | *       | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          | (((auth.jwt() ->> 'is_super_admin'::text))::boolean = true)                                                                                                                                                                                                          |
| public      | responses               | users_responses_policy                                 | true       |                             | *       | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = responses.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                      | (EXISTS ( SELECT 1
   FROM account_users
  WHERE ((account_users.account_id = responses.account_id) AND (account_users.user_id = auth.uid()))))                                                                                                                      |